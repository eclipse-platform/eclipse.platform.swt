<?xml version="1.0" encoding="UTF-8"?>
<project name="org.eclipse.swt" default="build.update.jar" basedir=".">

	<target name="initTemplate" unless="template">
		<initTemplate/>
	</target>

	<target name="init" depends="initTemplate, properties">
	</target>

	<target name="build.update.jar" depends="init">
		<property name="base" value="${basedir}/bin.zip.pdetemp"/>
		<delete dir="${base}"/>
		<mkdir dir="${base}"/>
		<antcall target="gather.bin.parts">
			<param name="destination" value="${base}/"/>
		</antcall>
		<delete>
			<fileset dir="${base}" includes="**/*.bin.log"/>
		</delete>
		<zip zipfile="${basedir}/${plugin}_${version}.jar" basedir="${base}/plugins/${plugin}"/>
		<delete dir="${base}"/>
	</target>

	<target name="gather.bin.parts" depends="init" if="destination">
		<ant antfile="${template}" target="includesExcludesCopy">
			<property name="srcdir" value="${basedir}"/>
			<property name="dest" value="${destination}/plugins/${plugin}"/>
			<property name="excludes" value="${bin.excludes}"/>
			<property name="includes" value="${bin.includes}"/>
		</ant>
	</target>

	<target name="clean" depends="init">
	</target>

	<target name="properties">
		<property name="plugin" value="org.eclipse.swt"/>
		<property name="version" value="2.0.0"/>
		<property name="bin.includes" value="plugin.xml,plugin.properties,about.html"/>
		<property name="bin.excludes" value=""/>
	</target>

</project>